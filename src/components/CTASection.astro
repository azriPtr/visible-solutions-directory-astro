---
import type { CTASectionComponent } from '../lib/strapi';
import Button from './Button.astro';

interface Props {
  data: CTASectionComponent;
  backgroundColor?: string;
}

const {
  data,
  backgroundColor = "bg-surface",
} = Astro.props;
---

<section class={`relative ${backgroundColor}`}>
  <div class="mx-auto max-w-7xl px-6 py-12 md:py-24">
    <div
      class="grid grid-cols-1 mid:grid-cols-2 items-center gap-8 md:gap-12 lg:grid-cols-2">
      <!-- Left Section -->
      <div>
        {data.heading.heading && (
          <h2
            class="text-2xl font-bold tracking-tight text-primary sm:text-5xl lg:text-4xl">
            {data.heading.heading}
          </h2>
        )}
        
        {data.heading.subHeading && (
          <p class="text-base-300 mt-4 text-base md:text-lg">
            {data.heading.subHeading}
          </p>
        )}
      </div>

      <!-- Right Section -->
      <div>
        <!-- Custom slot content (for special cases like AI mockup) -->
        <slot>
          <!-- Default: Render bulletList and CTAs from Strapi -->
          {(data.bulletList || data.ctaPrimary || data.ctaSecondary) && (
            <div class="space-y-6">
              <!-- Bullet List -->
              {data.bulletList && data.bulletList.length > 0 && (
                <div class="space-y-4">
                  {data.bulletList.map((item) => (
                    <div class="flex items-start gap-3">
                      <div
                        class="flex h-6 w-6 shrink-0 items-center justify-center rounded-full bg-emerald-500/10 mt-0.5">
                        <svg
                          xmlns="http://www.w3.org/2000/svg"
                          width="16"
                          height="16"
                          viewBox="0 0 24 24"
                          fill="none"
                          stroke="currentColor"
                          stroke-width="2.5"
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          class="text-emerald-600">
                          <path d="M20 6 9 17l-5-5"></path>
                        </svg>
                      </div>
                      <div class="flex-1">
                        {item.text && (
                          <h3 class="text-base font-bold text-primary mb-1">
                            {item.text}
                          </h3>
                        )}
                        {item.desc && (
                          <p class="text-muted text-sm">
                            {item.desc}
                          </p>
                        )}
                      </div>
                    </div>
                  ))}
                </div>
              )}

            <!-- CTA Buttons -->
            {(data.ctaPrimary || data.ctaSecondary) && (
              <div class="flex flex-wrap gap-3 pt-2">
                {data.ctaPrimary && (
                  <Button
                    text={data.ctaPrimary.ctaText}
                    variant="primary"
                    size="md"
                    href={data.ctaPrimary.ctaUrl || "#"}
                  />
                )}
                {data.ctaSecondary && (
                  <Button
                    text={data.ctaSecondary.ctaText}
                    variant="outline"
                    size="md"
                    href={data.ctaSecondary.ctaUrl || "#"}
                  />
                )}
              </div>
            )}
            </div>
          )}
        </slot>
      </div>
    </div>
  </div>
</section>
