---
import Card from "./Card.astro";
import type { CardsSectionComponent } from "../lib/strapi";

interface Props {
  data: CardsSectionComponent;
  items: any[]; // Items still come from local data layer
}

const { data, items } = Astro.props;

// Extract fields from Strapi with type safety
const title = data.heading.heading;
const description = data.heading.subHeading;
const columns = data.display === 3 ? "3" : "4";
const cardVariant = data.content; // 'service' | 'location' | 'article'

const gridColsClass = columns === "3" ? "lg:grid-cols-3" : "lg:grid-cols-4";
---

<section class="relative">
  <div class="mx-auto max-w-7xl px-6 py-10 md:py-24">
    <div class="mb-10 max-w-3xl">
      <h2 class="text-3xl font-bold text-primary tracking-tight">
        {title}
      </h2>
      {description && (
        <p class="mt-4 text-lg text-base-300">
          {description}
        </p>
      )}
    </div>

    <!-- Card Grid -->
    {items && items.length > 0 && (
      <ol
        class={`grid grid-cols-1 gap-6 sm:grid-cols-2 ${gridColsClass} list-none mt-0 mr-0 mb-10 ml-0 pt-0 pr-0 pb-0 pl-0 gap-x-6 gap-y-6`}>
        {items.map((item) => <Card {...item} variant={cardVariant} />)}
      </ol>
    )}
  </div>
</section>
