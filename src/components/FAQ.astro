---
import type { FAQSectionComponent } from "../lib/strapi";

interface Props {
  data?: FAQSectionComponent | null;
}

const { data } = Astro.props;

// Don't render if no data
if (!data) {
  return null;
}
---

<section class="relative bg-base-100 py-16">
  <div class="mx-auto max-w-4xl px-6">
    <!-- Section Header -->
    <div class="mb-12 text-center">
      <h2 class="text-3xl font-bold tracking-tight text-primary">
        {data.heading?.heading || "Frequently asked questions"}
      </h2>
      {data.heading?.subHeading && (
        <p class="mt-4 text-lg text-base-300">
          {data.heading.subHeading}
        </p>
      )}
    </div>

    <!-- FAQ Items -->
    {data.accordion && data.accordion.length > 0 && (
      <div class="mb-12 space-y-4">
        {data.accordion.map((faq) => (
        <details class="group rounded-lg border border-base-200 bg-white p-6 shadow-sm">
          <summary class="flex cursor-pointer items-center justify-between font-semibold text-base-content">
            <span class="text-lg text-primary">{faq.question}</span>
            <svg
              class="h-5 w-5 flex-shrink-0 text-base-content/40 transition-transform group-open:rotate-180"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24">
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M19 9l-7 7-7-7"
              />
            </svg>
          </summary>
          <div class="mt-4 border-t border-base-200 pt-4">
            <p class="text-sm leading-relaxed text-base-content/70 whitespace-pre-line">
              {faq.answer.trim()}
            </p>
          </div>
        </details>
        ))}
      </div>
    )}

    <!-- CTA Link -->
    {data.cta && (
      <div class="mt-12 text-center">
        <a
          href="/about"
          class="inline-flex items-center gap-1 text-sm font-bold text-primary transition-colors hover:text-secondary">
          {data.cta.ctaText}
          <svg
            class="h-4 w-4"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="2"
            stroke-linecap="round"
            stroke-linejoin="round">
            <path d="M5 12h14m-7-7 7 7-7 7" />
          </svg>
        </a>
      </div>
    )}
  </div>
</section>
